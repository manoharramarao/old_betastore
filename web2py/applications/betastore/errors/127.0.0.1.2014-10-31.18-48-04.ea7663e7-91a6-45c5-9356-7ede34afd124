(dp1
S'output'
p2
S"<type 'exceptions.IOError'> [Errno 2] No such file or directory: '/home/manohar/work/bisineer_store/web2py/static/product_details.csv'"
p3
sS'layer'
p4
S'/home/manohar/work/bisineer_store/web2py/applications/betastore/controllers/bisineer_user.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n\nimport logging\nimport gluon.contrib.simplejson as json\n\nlogger = logging.getLogger("bisineer_user")\nlogger.setLevel(logging.DEBUG)\n\n# try something like\ndef index(): return dict(message="hello from bisineer_user.py")\n\n# def register():\n#     """\n#     1. checks if the user already exists\n#     2. if it is new user, then saves data to DB\n#     input json - \n#     {\n#         "first_name": "Manohar\'",\n#         "last_name": "Sangeetham Ramarao",\n#         "email": "manohar@gmail.com",\n#         "phone_number": "99-00-99-5840",\n#         "password": "test1234",\n#         "repeat_password": "test1234"\n#     }\n#     output jsons - \n#     {\'result\': \'success\', \'message\': \'user registered successfully\'}\n#     or\n#     {\'result\': \'failure\', \'message\': \'user registration failed\'}\n#     """\n#     result = {}\n# \t# read post body\n#     print "inside register"\n# \t#print request.env.web2py_runtime_gae\n#     response.headers[\'Access-Control-Allow-Headers\'] = [\'Content-Type\']\n#     json_string = request.body.read()\n#     user = json.loads(json_string)\n#     validate_user_result = validate_user(user)\n#     if validate_user_result[\'result\'] == "success":\n#         # encrypt password if validation passed\n#         my_crypt = CRYPT(key=auth.settings.hmac_key)\n#         user[\'password\'] = my_crypt(user[\'password\'].encode(\'utf8\'))[0]\n#         user.pop(\'repeat_password\')\n#         # insert into db if validation passed\n#         print "inserting user " + str(user)\n#         row = db.auth_user.insert(**user).as_dict()\n#         if bool(row):\n#             result = {"result": "success", "msg": "Registration successful"}\n#     else:\n#         result = validate_user_result\n#     return result\n\ndef register():\n    """\n    1. checks if the user already exists\n    2. if it is new user, then saves data to DB\n    input json - \n    {\n        "first_name": "Manohar\'",\n        "last_name": "Sangeetham Ramarao",\n        "email": "manohar@gmail.com",\n        "phone_number": "99-00-99-5840",\n        "password": "test1234",\n        "repeat_password": "test1234"\n    }\n    output jsons - \n    {\'result\': \'success\', \'message\': \'user registered successfully\'}\n    or\n    {\'result\': \'failure\', \'message\': \'user registration failed\'}\n    """\n    json_string = request.body.read()\n    user = json.loads(json_string)\n    user[\'password\'] = user[\'password\'].encode(\'utf8\')\n    user = auth.register_bare(**user)\n    print str(user)\n    if user:\n        result = {"result": "success", "msg": "Registration successful"}\n    else:\n        result = {"result": "failure", "msg": "Registration failed"}\n    return result\n\ndef validate_user(user):\n    """\n    1. checks if user already exists\n    2. checks if passwords match\n    """\n    result={"result": "success"}\n    row = db(db.auth_user.phone_number==user[\'phone_number\']).select().as_dict()\n    if bool(row):\n        result = {"result":"failure", "msg":"user already exists"}\n    \n    if user[\'password\'] != user[\'repeat_password\']:\n        result = {"result":"failure", "msg":"\xe0\xb2\xaa\xe0\xb2\xbe\xe0\xb2\xb8\xe0\xb3\x8d\xe0\xb2\xb5\xe0\xb2\xb0\xe0\xb3\x8d\xe0\xb2\xa1\xe0\xb3\x8d\xe0\xb2\x97\xe0\xb2\xb3\xe0\xb3\x81 \xe0\xb2\xb9\xe0\xb3\x86\xe0\xb3\x82\xe0\xb2\x82\xe0\xb2\xa6\xe0\xb2\xbf\xe0\xb2\x95\xe0\xb3\x86\xe0\xb2\xaf\xe0\xb2\xbe\xe0\xb2\x97\xe0\xb3\x81\xe0\xb2\xa4\xe0\xb3\x8d\xe0\xb2\xa4\xe0\xb2\xbf\xe0\xb2\xb2\xe0\xb3\x8d\xe0\xb2\xb2"}\n    return result\n\ndef login():\n    try:\n        json_string = request.body.read()\n        user = json.loads(json_string)\n        user[\'password\'] = user[\'password\'].encode(\'utf-8\')\n        user = auth.login_bare(user[\'email\'], user[\'password\']);\n        if auth.is_logged_in():\n            result = dict(session.auth.user);\n        else:\n            result = {"result": "failure", "msg": "email and password don\'t match"}\n    except Exception, e:\n        logging.error(str(e))\n        result = {"result": "failure", "msg": "Ouch!! something went wrong. Please try again"}\n    return result\n\ndef logout():\n    try:\n        session.auth = None\n        session.flash = auth.messages.logged_out\n        result = {"result": "success", "msg": "successfully logged out"}\n    except Exception, e:\n        logging.error(str(e))\n        result = {"result": "failure", "msg": "Ouch!! something went wrong. Please try again"}\n    print result\n    return result\n\n@auth.requires_login()\ndef get_user():\n    try:\n        result = dict(session.auth.user);\n    except Exception, e:\n        logging.error(str(e));\n        result = {"result": "failure", "msg": "Something went wrong. Please try again"}\n    return result\n\ndef export():\n#     try:\n    db.export_to_csv_file(open(\'/tmp/product_details_correct.csv\', \'wb\'))\n    result = {"result": "success"}\n#     except Exception, e:\n#         print str(e)\n#         result = {"result": "failure"}\n    return result\n\ndef import_auth_user():\n    products = {\'products\': [{\'heading\':\'Solar Water Heater\'}, {\'heading\':\'Multi Fuel Water Heater\'}]}\n    db.import_from_csv_file(open(\'/home/manohar/work/bisineer_store/web2py/static/auth_user.csv\', \'r\'))\n    result = {"result": "success"}\n    return result\n\ndef import_bis_product():\n    db.import_from_csv_file(open(\'/home/manohar/work/bisineer_store/web2py/static/product_details.csv\', \'r\'))\n    result = {"result": "success"}\n    return result\n\nresponse._vars=response._caller(import_bis_product)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/home/manohar/work/bisineer_store/web2py/gluon/restricted.py", line 224, in restricted\n    exec ccode in environment\n  File "/home/manohar/work/bisineer_store/web2py/applications/betastore/controllers/bisineer_user.py", line 150, in <module>\n  File "/home/manohar/work/bisineer_store/web2py/gluon/globals.py", line 392, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/manohar/work/bisineer_store/web2py/applications/betastore/controllers/bisineer_user.py", line 146, in import_bis_product\n    db.import_from_csv_file(open(\'/home/manohar/work/bisineer_store/web2py/static/product_details.csv\', \'r\'))\nIOError: [Errno 2] No such file or directory: \'/home/manohar/work/bisineer_store/web2py/static/product_details.csv\'\n'
p11
s.